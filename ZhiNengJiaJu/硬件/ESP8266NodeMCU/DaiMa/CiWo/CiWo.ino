#include <Arduino.h>
#include <ESP8266WiFi.h>        // 本程序使用 ESP8266WiFi库
#include <ESP8266WiFiMulti.h>   //  ESP8266WiFiMulti库
#include <ESP8266WebServer.h>   //  ESP8266WebServer库

#include <IRremoteESP8266.h>
#include <IRsend.h>

//自动风对应中风
//除湿对应制热
//送风对应通风
//Mesg Desc.: Power: Off  关空调    xxxx0
const uint16_t rawData1[199] = {4432, 4444,  548, 1642,  524, 552,  526, 1618,  548, 1642,  526, 526,  550, 526,  550, 1620,  548, 552,  524, 552,  524, 1620,  548, 528,  548, 552,  526, 1618,  548, 1616,  552, 528,  548, 1642,  526, 526,  552, 1618,  548, 1642,  524, 1642,  526, 1618,  548, 552,  526, 1616,  548, 1620,  548, 1616,  550, 552,  526, 528,  548, 552,  524, 554,  524, 1642,  526, 528,  548, 526,  550, 1620,  548, 1618,  550, 1642,  526, 552,  524, 528,  550, 526,  550, 552,  524, 528,  550, 550,  524, 528,  550, 528,  550, 1642,  524, 1642,  524, 1620,  548, 1620,  548, 1616,  552, 5244,  4456, 4448,  550, 1642,  524, 530,  548, 1642,  524, 1642,  524, 528,  548, 554,  524, 1618,  548, 530,  548, 552,  526, 1642,  524, 528,  548, 530,  548, 1618,  548, 1616,  550, 530,  548, 1618,  548, 552,  524, 1618,  550, 1618,  546, 1620,  548, 1642,  526, 528,  548, 1620,  548, 1620,  548, 1618,  548, 528,  548, 528,  550, 528,  548, 528,  548, 1642,  524, 530,  548, 552,  526, 1618,  548, 1642,  526, 1620,  544, 528,  548, 530,  548, 530,  548, 528,  548, 528,  548, 530,  548, 530,  548, 528,  548, 1618,  550, 1642,  524, 1642,  524, 1642,  526, 1618,  548}; 
// 开机->制冷，自动风，温度26     26011
const uint16_t rawData2[199] = {4458, 4446,  548, 1642,  526, 552,  524, 1618,  548, 1616,  552, 526,  550, 528,  550, 1642,  526, 528,  548, 528,  548, 1618,  548, 528,  550, 552,  524, 1620,  548, 1642,  524, 530,  548, 1618,  548, 1618,  548, 552,  526, 1642,  526, 1642,  526, 1618,  550, 1618,  548, 1618,  548, 1618,  550, 526,  550, 1618,  548, 528,  550, 528,  548, 530,  548, 552,  524, 552,  524, 528,  548, 1618,  550, 1616,  550, 552,  524, 1642,  524, 530,  548, 530,  548, 528,  550, 552,  524, 528,  550, 528,  548, 1644,  524, 528,  550, 1642,  524, 1642,  524, 1616,  550, 1644,  524, 5268,  4432, 4450,  548, 1620,  548, 528,  550, 1642,  524, 1620,  548, 530,  546, 528,  550, 1640,  526, 528,  550, 528,  550, 1642,  524, 530,  546, 528,  550, 1642,  524, 1642,  524, 552,  524, 1642,  524, 1618,  548, 528,  548, 1618,  550, 1616,  550, 1620,  548, 1642,  526, 1620,  546, 1618,  548, 528,  550, 1642,  524, 552,  524, 552,  524, 552,  526, 552,  524, 526,  550, 552,  524, 1620,  546, 1644,  524, 528,  548, 1642,  524, 530,  548, 530,  546, 528,  548, 528,  550, 528,  548, 530,  548, 1618,  548, 530,  548, 1618,  548, 1616,  550, 1642,  524, 1620,  548};  // COOLIX B2BFD0
// 上一次为->制冷，自动风，温度26   --->>制冷，自动风，温度27     27011
const uint16_t rawData3[199] = {4434, 4442,  548, 1642,  526, 552,  526, 1616,  550, 1642,  526, 526,  550, 528,  550, 1616,  550, 528,  548, 530,  548, 1642,  524, 528,  548, 526,  550, 1620,  548, 1618,  550, 552,  526, 1616,  552, 1642,  524, 528,  548, 1620,  548, 1616,  550, 1620,  548, 1642,  524, 1642,  524, 1642,  524, 526,  550, 1618,  548, 528,  550, 552,  526, 526,  550, 528,  550, 526,  550, 552,  524, 1618,  550, 528,  550, 552,  524, 1618,  548, 528,  550, 552,  524, 552,  526, 552,  524, 528,  548, 1616,  550, 1618,  550, 528,  550, 1616,  550, 1618,  548, 1642,  526, 1642,  526, 5244,  4456, 4472,  524, 1618,  550, 528,  548, 1618,  548, 1642,  526, 552,  526, 526,  550, 1642,  526, 528,  550, 552,  524, 1644,  524, 526,  552, 528,  548, 1644,  524, 1642,  524, 552,  524, 1618,  548, 1618,  548, 552,  526, 1640,  526, 1642,  526, 1616,  550, 1642,  526, 1642,  524, 1618,  550, 528,  550, 1642,  526, 528,  548, 552,  524, 528,  550, 552,  524, 528,  548, 528,  548, 1642,  524, 552,  524, 528,  550, 1616,  552, 550,  526, 552,  526, 528,  550, 528,  550, 552,  526, 1642,  526, 1642,  524, 552,  526, 1642,  524, 1620,  548, 1642,  524, 1642,  524};  // COOLIX B2BF90
// 上一次为->制冷，自动风，温度27  --->>制冷，自动风，温度28      28011
const uint16_t rawData4[199] = {4456, 4446,  548, 1618,  550, 528,  548, 1642,  524, 1620,  546, 530,  546, 554,  524, 1644,  524, 530,  546, 528,  550, 1620,  548, 530,  548, 552,  524, 1620,  546, 1618,  548, 528,  548, 1618,  548, 1642,  524, 552,  524, 1620,  546, 1620,  548, 1618,  548, 1642,  524, 1644,  524, 1618,  548, 552,  524, 1620,  548, 528,  548, 554,  524, 530,  548, 552,  524, 532,  546, 552,  524, 1620,  546, 528,  550, 552,  522, 530,  546, 554,  524, 528,  550, 552,  524, 552,  526, 552,  524, 1618,  548, 1620,  548, 1618,  548, 1618,  550, 1618,  548, 1642,  524, 1620,  548, 5246,  4454, 4450,  548, 1618,  548, 528,  548, 1620,  548, 1620,  546, 530,  546, 530,  550, 1642,  524, 530,  548, 554,  522, 1620,  548, 552,  526, 528,  548, 1642,  524, 1620,  548, 528,  548, 1642,  524, 1644,  524, 530,  548, 1618,  548, 1642,  526, 1642,  526, 1642,  526, 1642,  524, 1618,  548, 530,  548, 1618,  548, 530,  548, 528,  550, 552,  524, 530,  548, 530,  546, 528,  548, 1618,  548, 530,  546, 532,  546, 554,  524, 530,  548, 528,  546, 532,  548, 552,  524, 530,  546, 1644,  522, 1620,  548, 1642,  524, 1618,  548, 1644,  524, 1620,  548, 1644,  524};  // COOLIX B2BF80
// 上一次为->制冷，自动风，温度28 --->>制冷，自动风，温度27       27011
const uint16_t rawData5[199] = {4434, 4442,  552, 1618,  550, 552,  526, 1616,  550, 1642,  526, 526,  550, 552,  526, 1618,  550, 552,  524, 526,  550, 1614,  554, 550,  526, 552,  526, 1642,  526, 1642,  524, 526,  552, 1642,  526, 1616,  550, 552,  524, 1642,  526, 1616,  550, 1642,  526, 1642,  526, 1616,  550, 1616,  550, 526,  552, 1618,  550, 528,  548, 528,  548, 528,  550, 528,  550, 552,  526, 552,  524, 1642,  524, 552,  526, 552,  524, 1616,  552, 524,  552, 528,  548, 552,  526, 528,  550, 526,  550, 1642,  526, 1614,  552, 552,  526, 1642,  524, 1618,  550, 1640,  526, 1618,  550, 5244,  4456, 4448,  550, 1642,  526, 526,  550, 1642,  526, 1642,  524, 528,  550, 552,  524, 1642,  526, 552,  526, 552,  526, 1642,  524, 552,  526, 526,  550, 1642,  526, 1616,  550, 526,  550, 1642,  526, 1616,  550, 552,  526, 1642,  526, 1616,  552, 1616,  552, 1616,  552, 1642,  526, 1640,  526, 550,  526, 1642,  526, 552,  526, 552,  526, 526,  550, 528,  548, 552,  526, 550,  526, 1642,  524, 552,  526, 552,  526, 1618,  550, 550,  526, 552,  526, 552,  526, 552,  526, 550,  526, 1614,  552, 1642,  524, 552,  524, 1642,  526, 1614,  552, 1640,  526, 1620,  548};  // COOLIX B2BF90
// 上一次为->制冷，自动风，温度27 --->>制冷，自动风，温度26       26011
const uint16_t rawData6[199] = {4432, 4468,  524, 1616,  550, 528,  550, 1642,  524, 1644,  524, 552,  524, 552,  526, 1642,  526, 526,  550, 552,  524, 1644,  524, 552,  526, 526,  550, 1642,  524, 1642,  524, 528,  550, 1618,  550, 1618,  548, 530,  548, 1642,  524, 1616,  550, 1642,  526, 1642,  526, 1642,  526, 1642,  524, 528,  550, 1618,  550, 552,  524, 528,  548, 554,  524, 526,  550, 528,  550, 552,  526, 1642,  524, 1618,  548, 552,  524, 1644,  524, 526,  550, 528,  548, 528,  548, 528,  548, 530,  548, 528,  548, 1644,  524, 552,  524, 1618,  550, 1642,  524, 1618,  550, 1618,  550, 5246,  4456, 4472,  524, 1620,  548, 552,  524, 1618,  548, 1618,  548, 552,  524, 528,  550, 1618,  550, 552,  526, 528,  548, 1618,  548, 552,  526, 552,  524, 1618,  548, 1620,  548, 552,  526, 1616,  550, 1642,  524, 554,  524, 1618,  548, 1620,  548, 1642,  526, 1642,  526, 1618,  550, 1618,  550, 528,  548, 1642,  524, 552,  524, 552,  524, 528,  548, 552,  524, 552,  524, 552,  524, 1618,  548, 1620,  548, 552,  524, 1642,  524, 530,  548, 552,  526, 552,  524, 552,  524, 552,  524, 528,  550, 1642,  524, 526,  550, 1642,  524, 1642,  524, 1642,  524, 1620,  548};  // COOLIX B2BFD0
// 上一次为->制冷，自动风，温度26 --->>制冷，低风，温度26         26001
const uint16_t rawData7[199] = {4452, 4452,  542, 1624,  522, 578,  522, 1624,  544, 1644,  500, 558,  542, 532,  546, 1644,  522, 532,  544, 534,  522, 1646,  544, 556,  520, 556,  520, 1646,  500, 1668,  520, 534,  544, 1646,  500, 1644,  522, 554,  546, 534,  522, 1644,  542, 1626,  542, 1624,  544, 1624,  542, 1624,  546, 554,  522, 1644,  522, 1624,  544, 534,  542, 556,  500, 554,  544, 534,  544, 554,  522, 1624,  522, 1668,  500, 554,  546, 1622,  522, 578,  522, 532,  522, 556,  544, 534,  542, 534,  544, 556,  500, 1668,  500, 556,  544, 1644,  522, 1646,  520, 1624,  544, 1620,  544, 5274,  4404, 4500,  522, 1622,  544, 536,  542, 1624,  520, 1666,  522, 554,  522, 556,  522, 1622,  522, 578,  500, 578,  500, 1668,  522, 532,  522, 556,  522, 1644,  544, 1646,  522, 556,  500, 1668,  498, 1648,  542, 556,  522, 532,  544, 1622,  546, 1646,  498, 1668,  522, 1646,  520, 1646,  522, 554,  522, 1622,  546, 1620,  546, 534,  544, 532,  544, 556,  498, 554,  522, 578,  500, 1668,  500, 1646,  542, 534,  522, 1644,  524, 578,  520, 536,  520, 578,  522, 534,  522, 554,  544, 556,  522, 1624,  542, 536,  520, 1668,  522, 1644,  498, 1668,  500, 1668,  520};  // COOLIX B29FD0
// 上一次为->制冷，自动风，温度27 --->>制冷，低风，温度27         27001
const uint16_t rawData8[199] = {4434, 4468,  524, 1618,  550, 552,  526, 1642,  524, 1620,  548, 530,  546, 530,  548, 1620,  548, 552,  524, 528,  550, 1618,  548, 528,  550, 550,  526, 1618,  548, 1616,  550, 552,  524, 1642,  526, 1640,  524, 552,  526, 526,  550, 1618,  550, 1618,  548, 1642,  526, 1618,  548, 1642,  524, 552,  524, 1642,  524, 1616,  550, 552,  524, 552,  526, 552,  526, 528,  550, 552,  526, 1642,  526, 552,  526, 552,  524, 1642,  526, 528,  548, 528,  548, 552,  524, 526,  550, 552,  526, 1616,  550, 1618,  550, 552,  524, 1616,  550, 1618,  550, 1642,  526, 1642,  526, 5268,  4432, 4448,  550, 1616,  550, 552,  526, 1618,  550, 1618,  548, 552,  524, 552,  526, 1618,  548, 552,  524, 552,  526, 1616,  550, 552,  526, 526,  550, 1644,  524, 1642,  524, 528,  550, 1642,  526, 1620,  548, 552,  526, 552,  524, 1616,  550, 1618,  548, 1642,  526, 1642,  526, 1642,  524, 552,  524, 1618,  550, 1618,  548, 526,  552, 526,  550, 528,  548, 528,  550, 528,  548, 1642,  552, 524,  526, 552,  526, 1620,  548, 528,  548, 552,  526, 552,  526, 552,  526, 528,  550, 1618,  548, 1644,  524, 528,  548, 1618,  550, 1642,  524, 1642,  524, 1642,  524};  // COOLIX B29F90
// 上一次为->制冷，自动风，温度28 --->>制冷，低风，温度28         28001
const uint16_t rawData9[199] = {4454, 4470,  524, 1622,  546, 554,  498, 1668,  520, 1624,  546, 532,  544, 556,  522, 1646,  522, 556,  500, 552,  524, 1644,  546, 532,  546, 532,  542, 1624,  546, 1644,  522, 556,  498, 1668,  522, 1644,  522, 530,  524, 578,  500, 1668,  522, 1644,  520, 1626,  542, 1646,  522, 1644,  524, 530,  544, 1646,  498, 1668,  522, 554,  522, 532,  546, 534,  520, 578,  522, 554,  522, 1622,  546, 554,  522, 554,  522, 532,  522, 578,  500, 556,  542, 532,  542, 534,  546, 534,  544, 1620,  548, 1622,  544, 1622,  522, 1644,  546, 1620,  548, 1642,  522, 1644,  500, 5272,  4450, 4454,  546, 1620,  546, 534,  542, 1646,  522, 1620,  546, 556,  520, 534,  520, 1646,  544, 534,  544, 532,  546, 1622,  522, 554,  544, 534,  522, 1668,  520, 1624,  544, 534,  544, 1644,  520, 1646,  522, 534,  544, 532,  524, 1648,  518, 1668,  522, 1622,  546, 1624,  542, 1646,  522, 532,  544, 1624,  522, 1644,  546, 554,  522, 532,  544, 556,  522, 530,  544, 534,  522, 1646,  542, 554,  500, 578,  522, 532,  544, 556,  522, 554,  524, 530,  522, 578,  522, 556,  520, 1624,  542, 1646,  500, 1668,  522, 1644,  520, 1624,  544, 1646,  522, 1622,  544};  // COOLIX B29F80
// 上一次为->制冷，中，温度28 --->>制冷，高风，温度28             28021
const uint16_t rawData10[199] = {4458, 4444,  548, 1620,  548, 552,  524, 1618,  548, 1620,  546, 552,  524, 554,  526, 1620,  548, 552,  524, 552,  524, 1644,  524, 530,  546, 530,  546, 1644,  526, 1618,  548, 530,  546, 1644,  524, 530,  548, 552,  524, 1620,  548, 1618,  548, 1620,  548, 1642,  526, 1618,  548, 1642,  526, 1616,  550, 1618,  548, 552,  526, 552,  524, 528,  548, 528,  550, 554,  522, 528,  550, 1618,  548, 530,  548, 530,  548, 530,  546, 528,  550, 526,  550, 528,  548, 530,  546, 552,  526, 1642,  524, 1620,  548, 1642,  524, 1618,  550, 1620,  546, 1618,  548, 1642,  524, 5270,  4432, 4448,  550, 1642,  524, 530,  548, 1642,  524, 1620,  548, 528,  548, 552,  524, 1618,  548, 528,  548, 530,  548, 1620,  548, 528,  548, 526,  550, 1642,  524, 1616,  550, 552,  526, 1618,  548, 530,  548, 552,  524, 1618,  548, 1620,  548, 1642,  524, 1620,  548, 1618,  548, 1618,  548, 1642,  524, 1644,  524, 552,  526, 530,  546, 528,  550, 552,  524, 530,  546, 552,  524, 1642,  524, 528,  548, 554,  524, 552,  524, 530,  548, 528,  548, 552,  526, 528,  550, 528,  548, 1620,  548, 1620,  548, 1642,  524, 1618,  550, 1620,  548, 1618,  548, 1618,  548};  // COOLIX B23F80
// 上一次为->制冷，中，温度27 --->>制冷，高风，温度27             27021
const uint16_t rawData11[199] = {4432, 4444,  550, 1642,  524, 526,  550, 1620,  548, 1620,  548, 526,  550, 552,  526, 1642,  524, 528,  550, 528,  550, 1620,  548, 552,  524, 552,  524, 1618,  548, 1620,  546, 552,  524, 1618,  548, 530,  548, 526,  550, 1616,  550, 1644,  524, 1620,  548, 1620,  548, 1618,  548, 1618,  550, 1642,  524, 1620,  548, 528,  550, 528,  548, 528,  550, 552,  524, 552,  524, 530,  548, 1644,  522, 532,  546, 528,  550, 1620,  548, 528,  548, 552,  522, 530,  548, 530,  546, 528,  550, 1618,  548, 1642,  526, 526,  550, 1620,  546, 1616,  552, 1642,  524, 1644,  524, 5268,  4432, 4448,  550, 1616,  550, 552,  524, 1618,  550, 1618,  550, 528,  548, 552,  524, 1642,  524, 528,  548, 552,  526, 1618,  548, 552,  524, 530,  548, 1618,  548, 1620,  548, 552,  526, 1618,  548, 528,  548, 552,  524, 1642,  524, 1644,  524, 1642,  524, 1620,  548, 1642,  524, 1642,  524, 1642,  524, 1642,  524, 552,  524, 528,  548, 552,  524, 552,  524, 552,  524, 528,  548, 1620,  548, 530,  548, 552,  524, 1642,  526, 550,  524, 552,  526, 530,  548, 552,  524, 528,  548, 1620,  548, 1644,  524, 530,  548, 1618,  548, 1618,  550, 1618,  550, 1618,  548};  // COOLIX B23F90
// 上一次为->制冷，中，温度26--->>制冷，高风，温度26              26021
const uint16_t rawData12[199] = {4454, 4448,  546, 1622,  544, 534,  546, 1622,  544, 1646,  522, 532,  544, 554,  522, 1646,  524, 554,  522, 532,  544, 1624,  544, 532,  546, 532,  542, 1622,  546, 1646,  522, 532,  544, 1622,  546, 554,  522, 554,  500, 1668,  500, 1668,  522, 1620,  546, 1622,  544, 1624,  544, 1644,  522, 1624,  522, 1668,  498, 556,  542, 532,  544, 556,  522, 532,  522, 556,  520, 556,  544, 1624,  544, 1624,  542, 554,  522, 1622,  544, 556,  522, 554,  522, 554,  522, 532,  546, 554,  500, 578,  520, 1624,  544, 532,  546, 1620,  544, 1646,  522, 1620,  522, 1648,  520, 5272,  4452, 4476,  500, 1668,  522, 556,  522, 1622,  544, 1644,  524, 530,  546, 556,  522, 1644,  522, 534,  520, 556,  542, 1624,  542, 534,  522, 556,  522, 1668,  498, 1644,  522, 556,  544, 1622,  544, 556,  522, 556,  520, 1646,  522, 1646,  522, 1646,  498, 1668,  522, 1644,  522, 1644,  522, 1644,  500, 1668,  520, 534,  546, 554,  522, 532,  544, 534,  544, 530,  546, 532,  542, 1646,  500, 1646,  542, 532,  544, 1646,  522, 534,  546, 554,  522, 534,  544, 534,  542, 534,  546, 530,  546, 1622,  546, 532,  544, 1622,  544, 1646,  522, 1622,  546, 1622,  544};  // COOLIX B23FD0
// 上一次为->制冷，高，温度28 --->>制冷，高风，温度27             27021
const uint16_t rawData13[199] = {4404, 4474,  520, 1670,  520, 556,  500, 1646,  520, 1668,  522, 556,  520, 556,  500, 1670,  520, 556,  522, 556,  498, 1668,  520, 558,  520, 556,  500, 1668,  522, 1648,  498, 578,  520, 1626,  520, 556,  544, 556,  498, 1668,  500, 1668,  498, 1666,  522, 1648,  498, 1644,  544, 1624,  542, 1626,  540, 1646,  520, 536,  542, 534,  542, 560,  498, 578,  520, 556,  520, 554,  522, 1624,  522, 578,  520, 556,  520, 1646,  498, 578,  520, 558,  520, 536,  540, 558,  500, 576,  520, 1646,  520, 1650,  518, 556,  520, 1646,  522, 1648,  498, 1668,  500, 1668,  522, 5250,  4426, 4502,  498, 1668,  500, 578,  498, 1646,  542, 1624,  542, 558,  498, 578,  500, 1668,  520, 558,  518, 558,  498, 1670,  518, 556,  520, 558,  498, 1668,  520, 1648,  498, 578,  498, 1646,  540, 558,  500, 578,  498, 1670,  498, 1668,  520, 1650,  518, 1646,  520, 1648,  498, 1668,  520, 1648,  498, 1668,  498, 578,  520, 556,  520, 556,  522, 556,  498, 576,  500, 578,  498, 1668,  498, 576,  522, 558,  518, 1628,  520, 578,  500, 578,  498, 578,  520, 558,  498, 556,  542, 1648,  518, 1626,  540, 558,  498, 1646,  522, 1668,  498, 1670,  498, 1668,  520};  // COOLIX B23F90
// 上一次为->制冷，高，温度27--->>制冷，高风，温度26              26021
const uint16_t rawData14[199] = {4458, 4468,  524, 1620,  548, 552,  524, 1618,  548, 1644,  524, 554,  524, 552,  524, 1618,  550, 552,  524, 552,  524, 1642,  524, 528,  550, 552,  524, 1642,  524, 1618,  550, 528,  548, 1618,  548, 552,  524, 552,  524, 1618,  548, 1644,  524, 1618,  550, 1618,  548, 1616,  552, 1642,  524, 1642,  524, 1620,  548, 552,  524, 552,  524, 530,  548, 528,  550, 552,  524, 552,  524, 1618,  550, 1642,  524, 526,  552, 1618,  548, 526,  550, 528,  548, 528,  548, 552,  524, 530,  548, 552,  524, 1642,  524, 530,  548, 1642,  524, 1642,  524, 1620,  548, 1620,  548, 5246,  4456, 4450,  548, 1642,  524, 528,  550, 1642,  526, 1616,  548, 554,  524, 528,  550, 1642,  524, 528,  548, 528,  550, 1620,  546, 530,  548, 530,  548, 1618,  548, 1642,  524, 552,  526, 1616,  550, 528,  550, 552,  524, 1618,  548, 1622,  546, 1620,  548, 1618,  548, 1620,  548, 1642,  524, 1618,  550, 1616,  550, 554,  524, 552,  526, 528,  548, 530,  548, 552,  524, 552,  524, 1618,  550, 1642,  526, 528,  548, 1642,  526, 528,  548, 552,  524, 528,  548, 528,  548, 554,  524, 530,  548, 1618,  548, 552,  526, 1642,  526, 1642,  524, 1618,  548, 1620,  546};  // COOLIX B23FD0
//自动风，温度26，除湿--->自动风，温度27，除湿      27111
uint16_t rawData15[199] = {4456, 4446,  548, 1618,  548, 552,  526, 1642,  526, 1618,  548, 552,  524, 554,  524, 1620,  548, 552,  524, 532,  546, 1620,  548, 552,  524, 552,  524, 1644,  524, 1642,  522, 530,  548, 1642,  526, 530,  546, 552,  524, 530,  546, 1644,  524, 1642,  524, 1618,  548, 1618,  548, 1622,  546, 1644,  524, 1622,  546, 1644,  524, 552,  526, 528,  548, 552,  524, 528,  548, 530,  548, 1642,  524, 528,  550, 530,  548, 1620,  548, 552,  524, 1620,  546, 554,  524, 552,  524, 552,  524, 1642,  524, 1642,  524, 554,  522, 1620,  548, 552,  524, 1620,  548, 1620,  546, 5246,  4454, 4452,  546, 1618,  548, 528,  548, 1620,  546, 1620,  546, 532,  546, 530,  548, 1618,  548, 530,  546, 532,  546, 1622,  546, 552,  524, 552,  524, 1644,  524, 1620,  546, 530,  548, 1618,  548, 530,  546, 528,  548, 530,  546, 1618,  550, 1620,  546, 1618,  548, 1620,  546, 1620,  546, 1644,  524, 1618,  550, 1642,  526, 528,  546, 530,  548, 530,  548, 528,  550, 528,  548, 1620,  546, 530,  546, 552,  524, 1620,  548, 552,  524, 1644,  524, 530,  548, 528,  548, 532,  546, 1622,  546, 1644,  524, 554,  524, 1620,  546, 528,  550, 1618,  548, 1642,  524};  // COOLIX B21F94
//自动风，温度27，除湿--->自动风，温度28，除湿      28111
uint16_t rawData16[199] = {4456, 4444,  550, 1618,  550, 528,  548, 1642,  524, 1620,  548, 528,  548, 552,  524, 1642,  526, 528,  548, 528,  548, 1642,  526, 528,  548, 528,  550, 1618,  550, 1620,  546, 552,  524, 1642,  524, 530,  548, 552,  524, 530,  548, 1642,  524, 1618,  550, 1618,  550, 1618,  548, 1620,  548, 1618,  548, 1618,  550, 1642,  524, 552,  524, 554,  524, 552,  524, 554,  524, 530,  548, 1642,  526, 526,  550, 552,  524, 552,  524, 552,  526, 1618,  548, 528,  550, 528,  548, 532,  546, 1642,  526, 1614,  550, 1644,  524, 1618,  548, 528,  550, 1642,  524, 1644,  524, 5270,  4432, 4472,  526, 1642,  524, 528,  550, 1644,  524, 1642,  524, 552,  526, 552,  526, 1618,  548, 552,  524, 530,  548, 1618,  548, 552,  524, 552,  524, 1642,  524, 1644,  526, 528,  548, 1618,  548, 552,  526, 530,  548, 528,  550, 1618,  550, 1618,  550, 1642,  524, 1642,  524, 1618,  548, 1642,  524, 1620,  548, 1618,  550, 528,  548, 526,  550, 552,  524, 552,  524, 552,  524, 1642,  524, 552,  526, 552,  526, 552,  524, 552,  524, 1642,  524, 552,  524, 552,  524, 528,  550, 1618,  548, 1620,  548, 1620,  548, 1618,  548, 526,  550, 1620,  548, 1618,  548};  // COOLIX B21F84
//自动风，温度26，除湿--->自动风，无温度，送风      xx211
uint16_t rawData17[199] = {4456, 4448,  546, 1620,  546, 554,  500, 1668,  524, 1622,  544, 532,  522, 554,  546, 1644,  522, 532,  522, 556,  546, 1620,  546, 554,  524, 554,  524, 1622,  522, 1646,  542, 536,  544, 1622,  522, 1644,  546, 532,  522, 1668,  500, 1644,  522, 1644,  544, 1624,  544, 1622,  546, 1622,  544, 534,  544, 1622,  522, 554,  546, 532,  546, 554,  498, 578,  522, 532,  544, 530,  548, 1644,  522, 1624,  542, 1646,  522, 530,  546, 554,  522, 1644,  520, 532,  546, 556,  498, 554,  546, 554,  524, 532,  522, 1646,  544, 1644,  498, 578,  524, 1620,  546, 1644,  522, 5250,  4452, 4452,  544, 1622,  546, 530,  544, 1622,  546, 1622,  544, 532,  546, 530,  546, 1622,  544, 554,  522, 556,  522, 1622,  522, 578,  522, 532,  544, 1644,  500, 1644,  544, 534,  544, 1644,  522, 1624,  544, 554,  524, 1620,  546, 1622,  544, 1644,  500, 1668,  498, 1668,  500, 1642,  546, 532,  546, 1644,  522, 554,  524, 532,  544, 532,  546, 554,  522, 554,  522, 532,  542, 1648,  520, 1622,  546, 1618,  524, 554,  546, 530,  546, 1644,  522, 556,  522, 532,  544, 532,  546, 532,  546, 532,  546, 1622,  546, 1644,  524, 530,  548, 1644,  522, 1622,  544};  // COOLIX B2BFE4
//自动风，无温度，送风-->低风，无温度，送风         xx201
uint16_t rawData18[199] = {4432, 4446,  548, 1644,  524, 530,  548, 1618,  550, 1618,  548, 528,  548, 530,  548, 1620,  544, 556,  524, 528,  548, 1620,  548, 530,  546, 554,  522, 1620,  548, 1620,  548, 528,  548, 1620,  548, 1620,  546, 530,  548, 554,  524, 1620,  546, 1620,  548, 1644,  524, 1620,  546, 1620,  546, 554,  524, 1642,  524, 1642,  526, 526,  550, 552,  524, 528,  548, 554,  524, 554,  522, 1622,  548, 1618,  548, 1618,  550, 530,  546, 554,  524, 1622,  544, 554,  524, 530,  548, 528,  550, 528,  548, 530,  546, 1644,  524, 1620,  548, 552,  524, 1642,  524, 1620,  546, 5248,  4454, 4474,  524, 1642,  524, 530,  546, 1642,  524, 1618,  548, 530,  548, 528,  548, 1620,  548, 530,  546, 554,  524, 1618,  550, 526,  550, 532,  546, 1620,  548, 1618,  550, 528,  546, 1622,  546, 1620,  548, 528,  548, 530,  546, 1644,  522, 1644,  524, 1618,  548, 1618,  548, 1618,  548, 530,  546, 1644,  524, 1618,  548, 530,  548, 528,  546, 528,  550, 552,  524, 530,  548, 1618,  548, 1620,  548, 1618,  548, 530,  548, 554,  524, 1620,  548, 530,  546, 552,  524, 552,  524, 530,  548, 552,  522, 1620,  548, 1618,  548, 530,  546, 1644,  524, 1620,  546};  // COOLIX B29FE4
//低风，无温度，送风-->高风，无温度，送风           xx221
uint16_t rawData19[199] = {4454, 4472,  522, 1646,  522, 534,  542, 1644,  522, 1646,  522, 532,  522, 576,  524, 1644,  522, 532,  544, 554,  522, 1624,  544, 556,  524, 532,  544, 1624,  544, 1646,  520, 532,  546, 1624,  542, 530,  548, 532,  544, 1622,  544, 1622,  546, 1624,  544, 1624,  544, 1622,  544, 1646,  522, 1646,  498, 1646,  544, 554,  522, 554,  522, 554,  522, 534,  542, 532,  546, 554,  522, 1622,  522, 1668,  522, 1646,  522, 532,  544, 532,  544, 1622,  544, 534,  544, 556,  520, 534,  544, 556,  522, 554,  522, 1624,  520, 1668,  522, 534,  522, 1668,  498, 1648,  520, 5272,  4452, 4456,  542, 1622,  544, 556,  522, 1622,  544, 1624,  522, 578,  500, 554,  542, 1624,  522, 556,  522, 578,  522, 1646,  498, 554,  544, 556,  520, 1646,  520, 1622,  546, 532,  544, 1646,  522, 556,  520, 556,  520, 1646,  520, 1626,  522, 1644,  522, 1644,  522, 1668,  520, 1646,  522, 1646,  522, 1622,  544, 556,  520, 558,  498, 578,  500, 576,  500, 578,  522, 556,  522, 1622,  542, 1648,  522, 1644,  522, 532,  522, 578,  520, 1624,  542, 534,  544, 556,  524, 554,  500, 576,  500, 578,  522, 1646,  522, 1624,  544, 532,  544, 1646,  498, 1668,  500};  // COOLIX B23FE4

WiFiClient client;//建立WiFi客户端对象

//固定IP地址
ESP8266WiFiMulti wifiMulti;     // 建立ESP8266WiFiMulti对象,对象名称是'wifiMulti'
ESP8266WebServer esp8266_server(80);// 建立网络服务器对象，该对象用于响应HTTP请求。监听端口（80）
IPAddress local_IP(10, 3, 22, 14); // 设置ESP8266-NodeMCU联网后的IP
IPAddress gateway(10, 3, 22, 254);    // 设置网关IP（通常网关IP是WiFI路由IP）
IPAddress subnet(255, 255, 255, 0);   // 设置子网掩码
IPAddress dns(10, 3, 22, 254);           // 设置局域网DNS的IP（通常局域网DNS的IP是WiFI路由IP）

/* 连接您的WIFI SSID和密码 */
#define WIFI_SSID         "206"    
#define WIFI_PASSWD       "12345678"

int ZM_CiWo=-1;
int ZM_CiWo_old=-1;
int NT_CiWo=-1;
int NT_CiWo_old=-1;
int AF_JiaJuDianQi2=-1;
int AF_JiaJuDianQi2_old=-1;

const uint16_t kIrLed = 16;  // ESP8266 GPIO pin to use. Recommended: 16 (D0).
IRsend irsend(kIrLed);  // Set the GPIO to be used to sending the message. 

void setup(){
    Serial.begin(115200);          // 启动串口通讯
    delay(10);
    Serial.println("");
    // 初始化 wifi
    wifiInit(WIFI_SSID, WIFI_PASSWD);
    Serial.println(WiFi.SSID());              // 连接的WiFI名称
    Serial.print("IP address:\t");            // 以及
    Serial.println(WiFi.localIP());           // NodeMCU的IP地址

    esp8266_server.on("/FWQ",XiangYing_FWQ);
    esp8266_server.begin();
    Serial.println("CiWo_esp8266_server,启动");

    pinMode(D1, OUTPUT);
    digitalWrite(D1,LOW);
    pinMode(D2, OUTPUT);
    digitalWrite(D2,LOW);
    
    pinMode(D5, OUTPUT);//家居电器2
    digitalWrite(D5,LOW);

    irsend.begin(); 
}


// 初始化 wifi 连接
void wifiInit(const char *ssid, const char *passphrase)
{
    // 设置开发板网络环境
    if (!WiFi.config(local_IP, gateway, subnet)) {
        Serial.println("Failed to ESP8266 IP"); 
    } 
  WiFi.mode(WIFI_AP_STA);
    WiFi.begin(ssid, passphrase);
    int i=0;
    while (WiFi.status() != WL_CONNECTED)
    {
        delay(1000);
        i++;
        Serial.print("i");
    }
    Serial.println("Connected to AP");
}

void loop() {
    esp8266_server.handleClient();// 处理http服务器访问

    if(ZM_CiWo_old!=ZM_CiWo){
        if(ZM_CiWo==0){
            digitalWrite(D1,LOW);
            digitalWrite(D2,LOW);
        }
        else if(ZM_CiWo==1){
            digitalWrite(D1,HIGH);
            digitalWrite(D2,LOW);
        }
        else if(ZM_CiWo==2){
            digitalWrite(D1,LOW);
            digitalWrite(D2,HIGH);
        }
        else if(ZM_CiWo==3){
            digitalWrite(D1,HIGH);
            digitalWrite(D2,HIGH);
        }
        ZM_CiWo_old=ZM_CiWo;
    }

    if(AF_JiaJuDianQi2_old!=AF_JiaJuDianQi2){
        if(AF_JiaJuDianQi2==1){
            digitalWrite(D5,HIGH);
        }
        else{
            digitalWrite(D5,LOW);
        }
        AF_JiaJuDianQi2_old=AF_JiaJuDianQi2;
    }

    if(NT_CiWo_old!=NT_CiWo){
        NuanTong_do(NT_CiWo);
        NT_CiWo_old=NT_CiWo;
    }
}

void XiangYing_FWQ(){
    ZM_CiWo=esp8266_server.arg("ZM_CiWo").toInt();
    NT_CiWo=esp8266_server.arg("NT_CiWo").toInt();
    AF_JiaJuDianQi2=esp8266_server.arg("AF_JiaJuDianQi2").toInt();
    Serial.print("ZM_CiWo:");
    Serial.println(ZM_CiWo);
}

void NuanTong_do(int data){
    if(data%10==0){
        irsend.sendRaw(rawData1,sizeof(rawData1)/sizeof(rawData1[0]), 38);
    }
    else if(data==26011){
        irsend.sendRaw(rawData2,sizeof(rawData2)/sizeof(rawData2[0]), 38);
    }
    else if(data==27011){
        irsend.sendRaw(rawData3,sizeof(rawData3)/sizeof(rawData3[0]), 38);
    }
    else if(data==28011){
        irsend.sendRaw(rawData4,sizeof(rawData4)/sizeof(rawData4[0]), 38);
    }
    else if(data==26001){
        irsend.sendRaw(rawData7,sizeof(rawData7)/sizeof(rawData7[0]), 38);
    }
    else if(data==27001){
        irsend.sendRaw(rawData8,sizeof(rawData8)/sizeof(rawData8[0]), 38);
    }
    else if(data==28001){
        irsend.sendRaw(rawData9,sizeof(rawData9)/sizeof(rawData9[0]), 38);
    }
    else if(data==28021){
        irsend.sendRaw(rawData10,sizeof(rawData10)/sizeof(rawData10[0]), 38);
    }
    else if(data==27021){
        irsend.sendRaw(rawData11,sizeof(rawData11)/sizeof(rawData11[0]), 38);
    }
    else if(data==26021){
        irsend.sendRaw(rawData12,sizeof(rawData12)/sizeof(rawData12[0]), 38);
    }
    else if(data==27111){
        irsend.sendRaw(rawData15,sizeof(rawData15)/sizeof(rawData15[0]), 38);
    }
    else if(data==28111){
        irsend.sendRaw(rawData16,sizeof(rawData16)/sizeof(rawData16[0]), 38);
    }
    else if(data%1000==211){//xx211
        irsend.sendRaw(rawData17,sizeof(rawData17)/sizeof(rawData17[0]), 38);
    }
    else if(data%1000==201){//xx201
        irsend.sendRaw(rawData18,sizeof(rawData18)/sizeof(rawData18[0]), 38);
    }
    else if(data%1000==221){//xx221
        irsend.sendRaw(rawData19,sizeof(rawData19)/sizeof(rawData19[0]), 38);
    }
}
